@model  IEnumerable<FruitBasketTestApp.Models.Product>


@{
    ViewBag.Title = "Index";
}


<h2>Fruit Basket</h2>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>

<script type="text/javascript">
    $(function () {
        // Document.ready -> link up remove event handler
        $(".AddLink").click(function () {
            // Get the id 
            var recordToAdd = $(this).attr("data-id");
            if (recordToAdd != '') {
                // Post to BasketManager/AddToCart
                $.post("/BasketManager/AddToCart", { "id": recordToAdd },
                    function (data) {
                        $('#cart-status').text(data.BasketCount);
                    });
            }
        });
    });
</script>

<!-- Button trigger modal -->
@*<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div aria-hidden="true" class="alert alert-dismissable alert-success">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <strong>An item was added to your cart.</strong> 
    </div>
   
</div>*@


<div class="panel panel-default">

    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>
                    Product Type
                </th>
                <th>
                    Product Name
                </th>
                <th>
                    Product Price
                </th>
                <th>

                </th>
                <th></th>
            </tr>
        </thead>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.ProductCatagory.ProductCategoryName)
                </td>
                <td>
                    @Html.ActionLink((string)item.Name, "Details", "Home", new { id = item.ProductId }, null)

                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>

                <td>
                    <a href="#" class="AddLink"
                       data-id="@item.ProductId" data-toggle="modal" data-target="#myModal">
                        Add
                        to basket
                    </a>

                </td>
            </tr>
        }
    </table>
</div>


